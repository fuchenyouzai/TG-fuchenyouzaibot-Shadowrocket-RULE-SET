# ============================================
# Shadowrocket 悠哉3.0配置文件（2026增强版）
# ============================================

[General]

# ===================== 全局基础配置 =====================
bypass-system = true  # 跳过系统代理，避免iOS推送延迟、系统服务异常（必开）
proxy-mode = rule     # 核心代理模式：按规则自动分流
skip-proxy = 127.0.0.1, localhost, ::1, *.local, captive.apple.com, 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12  # 不走代理的地址（本地+内网+苹果验证服务）跳过代理的地址（内网+本地+常用国内基础服务）
local-port = 1080     # 本地代理监听端口（默认值，无需修改）

# ===================== 辅助功能配置 =====================
log-level = notify    # 日志等级：仅显示关键通知（不占内存，便于排查基础问题）
traffic-statistic = true  # 启用流量统计（APP内可实时查看上传/下载用量）
allow-wifi-access = true  # 开启WiFi共享（电脑、平板等局域网设备可连代理）
wifi-access-http-port = 6152  # WiFi共享HTTP端口（默认值，无需修改）
wifi-access-socks5-port = 6153  # WiFi共享SOCKS5端口（默认值，无需修改）
hide-vpn-icon = false  # 隐藏VPN图标（部分iOS版本支持，需隐藏时改为true）
ipv6 = true            # 启用IPv6支持（适配IPv6网络，避免部分网站无法访问）
ipv6-vif = true        # 启用IPv6虚拟接口（增强IPv6兼容性，减少连接失败）
always-reject-url-rewrite = false  # URL Rewrite 设置。不拒绝URL重写（保障广告拦截规则生效）

# ===================== TUN模式配置（全局代理核心） 全局代理，支持UDP =====================
tun = true            # 启用TUN模式，实现全局流量接管（支持UDP，游戏/语音必备）
tun-device = utun     # TUN设备类型（固定值，无需修改）
tun-excluded-routes = 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16  # 排除内网路由（局域网设备直连，不占代理流量）TUN排除的路由（局域网、保留网段，不走代理）
tun-included-routes = 0.0.0.0/0  # TUN包含的路由（全局IPv4流量）包含所有IPv4流量（确保全局流量被TUN接管）


# ===================== DNS配置（防泄漏+防污染+稳定性优化）支持 over-tun 避免泄漏 =====================
dns-mode = over-tun   # DNS通过TUN传输，彻底避免DNS泄漏（隐私保护关键）
dns-server = 223.5.5.5, 119.29.29.29, 8.8.8.8, 1.1.1.1, system  # 主DNS：国内阿里云+腾讯云优先（解析快），国外DNS备用
dns-fallback = 8.8.4.4, 9.9.9.9  # 备用DNS：主DNS故障时自动切换，保障解析不中断
dns-direct-fallback = true  # 直连DNS回退：当代理DNS不可用时，自动切换到直连DNS（避免解析完全失效）避免代理DNS故障时“解析断连”，自动切直连DNS；
dns-direct-system = true    # 直连使用系统DNS：直连场景下优先用系统默认DNS（适配国内网络，解析更快）国内直连场景用系统DNS，比手动指定的DNS更适配本地网络；
dns-force-remote = false    # 不强制使用远程DNS：避免国内直连场景下强制走代理DNS，减少延迟，不强制所有场景走代理DNS，减少国内直连时的解析延迟；
dns-perfer-h3 = true        # 优先使用HTTP/3协议解析， DNS：若DNS服务器支持，用更高效的HTTP/3协议解析（提升解析速度）
enable-dns-cache = true  # 启用DNS缓存，减少重复解析延迟，同时防DNS污染，DNS 缓存，防止污染
cache-size = 1024        # DNS缓存容量（1024条，满足日常使用）
skip-dns-proxy = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12  # 内网IP跳过DNS代理，避免局域网设备解析异常。跳过DNS代理的内网IP段



[Proxy]
🇭🇰 香港节点1 = vless, 104.17.55.142, 443, username=2a67d0f4-5a8c-461e-89f1-30cdc9bc6d68, tls=true, skip-cert-verify=false, sni=ProxyIP.HK.CMLiussss.net, network=ws, ws-path=/pyip=ProxyIP.HK.CMLiussss.net, ws-headers=Host:qianhouqianhoujiasudu1.dpdns.org, udp=true

🇺🇸 美国节点1 = vless, 
               104.18.209.30,
               443,
               username=2a67d0f4-5a8c-461e-89f1-30cdc9bc6d68,
               tls=true,
               skip-cert-verify=false,
               sni=qianhouqianhoujiasudu1.dpdns.org,
               network=ws,
               ws-path=/pyip=ProxyIP.US.CMLiussss.net,
               ws-headers=Host:qianhouqianhoujiasudu1.dpdns.org,
               udp=true


[Proxy Group]
🕹️ 手动选择节点分组 = select, 
             🇭🇰 香港自动节点分组,
             🎮 PUBG🇭🇰节点自动切换分组,
             🌏 全球自动直连节点分组,
             🇭🇰 香港节点1,
             🇺🇸 美国节点1,
             DIRECT
             url=https://www.gstatic.com/generate_204, 
             interval=300


🇭🇰 香港自动节点分组= url-test,
             🇭🇰 香港节点1,
             🇺🇸 美国节点1
             url=https://www.gstatic.com/generate_204, 
             interval=300, 
             tolerance=50


🎮 PUBG🇭🇰节点自动切换分组 = fallback,
             🇭🇰 香港节点1,
             🇺🇸 美国节点1
             url=https://www.gstatic.com/generate_204, 
             interval=300,
             tolerance=50


🌏 全球自动直连节点分组 = select,
             DIRECT             
             url=https://www.gstatic.com/generate_204, 
             interval=300

🐟 漏网之鱼 = select,
             🕹️ 手动选择节点分组
             url=https://www.gstatic.com/generate_204, 
             interval=300


[Rule]

# 国内网站/IP直连
DOMAIN-SUFFIX,cn,DIRECT
DOMAIN-SUFFIX,aliyun.com,DIRECT
DOMAIN-SUFFIX,alipay.com,DIRECT
DOMAIN-SUFFIX,taobao.com,DIRECT
DOMAIN-SUFFIX,bilibili.com,DIRECT
DOMAIN-SUFFIX,qq.com,DIRECT
DOMAIN-SUFFIX,baidu.com,DIRECT




# 本地和局域网地址的规则集
RULE-SET,https://raw.githubusercontent.com/fuchenyouzai/TG-fuchenyouzaibot-Shadowrocket-RULE-SET/refs/heads/main/Lan.list,DIRECT



# 表示CN地区的IP分流走直连，GEOIP数据库用来判断IP是否属于CN地区。默认使用Shadowrocket自带的GEOIP数据库，如果您想替换其他数据库，可在 设置 - GeoLite2数据库 里添加和修改。
GEOIP,CN,DIRECT



# 表示当其他所有规则都匹配不到时才使用FINAL规则的策略。
FINAL,🐟 漏网之鱼

